Лабораторная работа № 2 Тема: Изучение базовых приемов работы с классами

Цель:

1. Закрепление навыков работы с классами

2. Закрепление навыков работы с динамической памятью на «куче»

3. Закрепление навыков работы с массивами

Порядок выполнения работы

• Ознакомиться с теоретическим материалом.

• Получить у преподавателя вариант задания.

• Реализовать задание своего варианта в соответствии с поставленными требованиями.

• Написать Unit-тесты с использованием Google Test.

• Создать репозиторий на GitHub.

• Отправить файлы лабораторной работы в репозиторий.

• Отчитаться по выполненной работе путём демонстрации работающей программы на тестовых наборах данных (как подготовленных самостоятельно, так и предложенных преподавателем) и ответов на вопросы преподавателя (как из числа контрольных, так и по реализации программы).

Требования к программе

Используя в качестве образца класс Array (см. ниже), реализовать динамические контейнеры с использованием динамического массива.

• Каждый класс должен быть разделен на интерфейс и реализацию.

• Самостоятельно определить необходимые типы, поля и дополнительные методы.

• Реализовать генерацию исключений в конструкторах и методах при необходимости (использовать стандартные исключения).

• Реализовать арифметические операции: сложение, вычитание, копирование

• Реализовать операции сравнения: (больше, меньше, равно).

• Арифметические операции с присваиванием должны быть реализованы как методы класса.

• Перегрузку операторов применять не нужно

• Объекты классов должны быть иммутабельными (то есть не меняться после создания), результат методов должен возвращаться как новый экземпляр объекта

class Array

{

public:

Array(); Array(const size_t & n, unsigned char t = 0); Array(const std::initializer_list< unsigned char> &t); Array(const string &t);

Array(const Array& other); Array(Array&& other) noexcept; virtual ~Array() noexcept;

};

План реализации варианта «класс Eleven (основание 11)»

1. Определить структуру проекта
   - include/Eleven.hpp — интерфейс класса
   - src/Eleven.cpp — реализация класса
   - tests/ — юнит-тесты Google Test
   - Makefile — сборка библиотеки и тестов

2. Интерфейс класса `Eleven`
   - Представление: `std::vector<unsigned char> digits;` (младший разряд — индекс 0)
   - Конструкторы:
     - по умолчанию: 0
     - из `size_t` длины и значения-цифры (инициализация)
     - из `std::initializer_list<unsigned char>` (проверка < 11)
     - из `std::string` (цифры '0'..'9' и 'A'/'a' = 10)
     - копирующий, перемещающий, деструктор `noexcept`
   - Методы (иммутабельные — возвращают новый объект):
     - `add(const Eleven& rhs) const` — сложение
     - `sub(const Eleven& rhs) const` — вычитание (бросает при отрицательном результате)
     - `compare(const Eleven& rhs) const -> int` (−1, 0, 1)
     - `toString() const -> std::string`
     - статические: `fromString(std::string_view)` с валидацией
   - Методы с присваиванием как отдельные иммутабельные версии:
     - `added(const Eleven& rhs) const` (эквивалент += но иммутабельно)
     - `subtracted(const Eleven& rhs) const`

3. Реализация
   - Валидация цифр: каждая `0..10`; нормализация: удаление ведущих нулей (кроме нулевого числа)
   - Сложение по основанию 11 с переносом
   - Вычитание по основанию 11 с займами; запрет отрицательного результата (std::invalid_argument)
   - Сравнение: сначала по длине без ведущих нулей, затем лексикографически по старшим разрядам

4. Исключения
   - `std::invalid_argument` — некорректная строка/цифра; попытка получить отрицательный результат

5. Тестирование (Google Test)
   - Парсинг/форматы: "0", "A", смешанный регистр, ведущие нули
   - Сравнение: равно, больше/меньше, разные длины
   - Сложение: без переноса, с переносом, разные длины
   - Вычитание: без займа, с займами, равные числа, случай отрицательного результата

6. Makefile
   - Цели: `all` (lib + tests), `lib`, `test`, `run`, `clean`
   - Флаги: `-std=c++17 -Wall -Wextra -Werror -O2`
   - Структура: объектные файлы в build/, библиотека static `build/libeleven.a`

7. Пример использования (в tests/main.cpp или examples/)
   - Конструирование из строки, печать, операции add/sub

8. Репозиторий
   - Инициализация, .gitignore, CI (по желанию)
